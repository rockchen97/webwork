{"remainingRequest":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edz/Documents/chen/webday9work/0524work/src/views/login2.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edz/Documents/chen/webday9work/0524work/src/views/login2.vue","mtime":1622079569101},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/cache-loader/dist/cjs.js","mtime":1620633447712},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/babel-loader/lib/index.js","mtime":1620633447741},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/cache-loader/dist/cjs.js","mtime":1620633447712},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/vue-loader/lib/index.js","mtime":1620782346830}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOidsb2dpbjInLAogICAgZGF0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBydWxlRm9ybTogewogICAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIH0sCiAgICAgICAgcnVsZXM6IHsKICAgICAgICAgIHVzZXJuYW1lOiBbCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXnlKjmiLflkI0nLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgICAgeyBtaW46IDMsIG1heDogNSwgbWVzc2FnZTogJ+mVv+W6puWcqCAzIOWIsCA1IOS4quWtl+espicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICBdLAogICAgICAgICAgcGFzc3dvcmQ6IFsKICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgICB7IG1pbjogNiwgbWF4OiAxMiwgbWVzc2FnZTogJ+mVv+W6puWcqCA2IOWIsCAxMiDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgXSwKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcE11dGF0aW9ucyhbJ2NoYW5nZUlkJ10pLAogICAgICAKICAgICAgLy8g6K6+572u55m75b2V5p2h5Lu2CiAgICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn55m75b2V5L+h5oGvJyx0aGlzLnJ1bGVGb3JtKTsKICAgICAgICAgICAgdGhpcy5sb2dpbigpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc290cmXkuK11c2VyJyx0aGlzLiRzdG9yZS5zdGF0ZS51c2VyKTsKICAgICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goJy9ob21lJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSwKICAgICAgLy8g5riF6Zmk6L6T5YWl5qGGCiAgICAgIHJlc2V0Rm9ybShmb3JtTmFtZSkgewogICAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7CiAgICAgIH0sCiAgICAgIC8vIHN1Y2Nlc3PlvLnmoYYKICAgICAgb3BlbigpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfmga3llpzkvaDvvIznmbvlvZXmiJDlip8nLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGNsb3NlKCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+WvhueggeaIlueUqOaIt+WQjemUmeivr++8jOivt+mHjeaWsOWhq+WGmScsCiAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIC8vIOacrOWcsOe8k+WtmHVzZXLmlbDmja4KICAgICAgc3RvcmFnZSgpewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgSlNPTi5zdHJpbmdpZnkodGhpcy4kc3RvcmUuc3RhdGUudXNlcikpOwogICAgICAgIAogICAgICB9LAogICAgICAvLyBsb2dpbgogICAgICBsb2dpbiAoKSB7CiAgICAgICAgYXhpb3MoewogICAgICAgICAgICB1cmw6ICdodHRwOi8vNDkuMjM1Ljk4LjY1OjMwMDAvdXNlci9sb2dpbicsCiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICBkYXRhIDogdGhpcy5ydWxlRm9ybSwKICAgICAgICAgICAgaGFkZXJzOiB7CiAgICAgICAgICAgIC8vIHVzZXI6ICc2MGE4OWQzNzU2YWU2MDU4NGJiMGIzN2InCiAgICAgICAgICAgIC8vICdjb250ZW50LXR5cGUnIDogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oIHJlcz0+IHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2xvZ2luIOe7k+aenCcsIHJlcyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dpbiB1c2VyJywgcmVzLmRhdGEpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbG9naW4gaWQnLCByZXMuZGF0YS51c2VyLl9pZCk7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudXNlcm5hbWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLnVzZXIudXNlcm5hbWUpKQogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnBhc3N3b3JkID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMuZGF0YS51c2VyLnBhc3N3b3JkKSkKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudXNlci5uaWNrbmFtZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEudXNlci5uaWNrbmFtZSkpCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYWdlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMuZGF0YS51c2VyLmFnZSkpCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuc2Nob29sID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMuZGF0YS51c2VyLnNjaG9vbCkpCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuZ2VuZGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMuZGF0YS51c2VyLmdlbmRlcikpCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuYXZhdGFyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMuZGF0YS51c2VyLmF2YXRhcikpCiAgICAgICAgICAgIHRoaXMuaWQgPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEudXNlci5faWQpKQogICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5pZCA9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyZXMuZGF0YS51c2VyLl9pZCkpCiAgICAgICAgICAgIHRoaXMuc3RvcmFnZSgpOwogICAgICAgICAgICB0aGlzLmNoYW5nZUlkKHtpZDogcmVzLmRhdGEudXNlci5faWR9KTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2lkLS0+Jyx0aGlzLiRzdG9yZS5zdGF0ZS5pZCk7CiAgICAgICAgICAgIHRoaXMub3BlbigpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3VzZXInKTsKICAgICAgICAgIH0pLmNhdGNoKCBlcnI9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImxvZ2luIGVyciIsIGVycik7CiAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICAgICAgfSkKICAgICAgfSwKICAgICAgCiAgICAKICAgIH0sCn0K"},{"version":3,"sources":["login2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA","file":"login2.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <div class=\"loginBox\">\n            <div class=\"leftImg\">\n                <img src=\"../images/auth.png\" alt=\"\" class=\"showImg\">\n            </div>\n            <div class=\"userLogin\">\n                <h3 class=\"tit\">用户登录</h3>\n                <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n                    <el-form-item label=\"用户名\" prop=\"username\">\n                        <el-input v-model=\"ruleForm.username\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"密码\" prop=\"password\">\n                        <el-input v-model=\"ruleForm.password\" type=\"password\"></el-input>\n                    </el-form-item>\n\n                    <div class=\"sign2Msg\">\n                        <span class=\"msg2\">还未注册？</span> <router-link to=\"/sign2\" class=\"a-sign2\">点击这里注册</router-link>\n                    </div>\n\n                    <el-form-item>\n                        <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即登录</el-button>\n                        <el-button @click=\"resetForm('ruleForm')\">重新输入</el-button>\n                    </el-form-item>\n                </el-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { mapMutations } from 'vuex';\nexport default {\n    name:'login2',\n    data() {\n      return {\n        ruleForm: {\n          username: '',\n          password: '',\n        },\n        rules: {\n          username: [\n            { required: true, message: '请输入用户名', trigger: 'blur' },\n            { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n          ],\n          password: [\n            { required: true, message: '请输入密码', trigger: 'blur' },\n            { min: 6, max: 12, message: '长度在 6 到 12 个字符', trigger: 'blur' }\n          ],\n        }\n      };\n    },\n    methods: {\n        ...mapMutations(['changeId']),\n      \n      // 设置登录条件\n      submitForm(formName) {\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            // console.log('登录信息',this.ruleForm);\n            this.login();\n            // console.log('sotre中user',this.$store.state.user);\n            // this.$router.push('/home');\n          } else {\n            this.close();\n            return false;\n          }\n        });\n      },\n      // 清除输入框\n      resetForm(formName) {\n        this.$refs[formName].resetFields();\n      },\n      // success弹框\n      open() {\n        this.$message({\n          message: '恭喜你，登录成功',\n          type: 'success'\n        });\n      },\n      close() {\n        this.$message({\n          message: '密码或用户名错误，请重新填写',\n          type: 'error'\n        });\n      },\n      // 本地缓存user数据\n      storage(){\n        localStorage.setItem(\"user\", JSON.stringify(this.$store.state.user));\n        \n      },\n      // login\n      login () {\n        axios({\n            url: 'http://49.235.98.65:3000/user/login',\n            method: 'POST',\n            data : this.ruleForm,\n            haders: {\n            // user: '60a89d3756ae60584bb0b37b'\n            // 'content-type' : 'application/x-www-form-urlencoded'\n            }\n        }).then( res=> {\n            // console.log('login 结果', res);\n            console.log('login user', res.data);\n            // console.log('login id', res.data.user._id);\n            this.$store.state.user.username = JSON.parse(JSON.stringify(res.data.user.username))\n            this.$store.state.user.password = JSON.parse(JSON.stringify(res.data.user.password))\n            this.$store.state.user.nickname = JSON.parse(JSON.stringify(res.data.user.nickname))\n            this.$store.state.user.age = JSON.parse(JSON.stringify(res.data.user.age))\n            this.$store.state.user.school = JSON.parse(JSON.stringify(res.data.user.school))\n            this.$store.state.user.gender = JSON.parse(JSON.stringify(res.data.user.gender))\n            this.$store.state.user.avatar = JSON.parse(JSON.stringify(res.data.user.avatar))\n            this.id =JSON.parse(JSON.stringify(res.data.user._id))\n            this.$store.state.id =JSON.parse(JSON.stringify(res.data.user._id))\n            this.storage();\n            this.changeId({id: res.data.user._id});\n            console.log('id-->',this.$store.state.id);\n            this.open();\n            this.$router.push('/user');\n          }).catch( err=> {\n              console.log(\"login err\", err);\n              this.close();\n          })\n      },\n      \n    \n    },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.loginBox{\n    width: 800px;\n    height: auto;\n    margin: 50px auto 0;\n    box-shadow: 0 0 5px -1px #666;\n    border-radius: 10px;\n    position: relative;\n    display: flex;\n    justify-content: space-evenly;\n    \n    .leftImg{\n        width: 340px;\n        position: relative;\n        \n        .showImg{\n            width: 300px;\n            height: 400px;\n            margin: 20px;\n        }\n    }\n\n    .userLogin{\n        width: 400px;\n        text-align: center;\n        .sign2Msg{\n            margin-bottom: 20px;\n            .msg2{\n                font-size: 12px;\n                color: #8f9090;\n            }\n            .a-sign2{\n                text-decoration: none;\n                font-size: 12px;\n                color: #505050;\n            }\n        }\n    }\n\n}\n</style>"]}]}