{"remainingRequest":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edz/Documents/chen/webday9work/0524work/src/views/management.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edz/Documents/chen/webday9work/0524work/src/views/management.vue","mtime":1622170457414},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/cache-loader/dist/cjs.js","mtime":1620633447712},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/babel-loader/lib/index.js","mtime":1620633447741},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/cache-loader/dist/cjs.js","mtime":1620633447712},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/vue-loader/lib/index.js","mtime":1620782346830}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgeyBnZXQsIHB1dCwgcG9zdCwgZGVsfSBmcm9tICcuLi91dGlscy9mZXRjaC5qcycKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ21hbmFnZW1lbnQnLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwcm9MaXN0OiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBfaWQ6ICcnLAogICAgICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgICAgICBwcmljZTogJycsCiAgICAgICAgICAgICAgICBpbWFnZTogJycKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG5ld0l0ZW06IHsKICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgcHJpY2U6ICcnLAogICAgICAgICAgICAgICAgaW1hZ2U6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGl0ZW06IHsKICAgICAgICAgICAgICAgIF9pZDogJycsCiAgICAgICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgICAgIHByaWNlOiAnJywKICAgICAgICAgICAgICAgIGltYWdlOiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgICAgICAgIG5ld0l0ZW1WaXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgZm9ybUxhYmVsV2lkdGg6ICcxMjBweCcsCiAgICAgICAgICAgIGluZGV4OiAnJywKICAgICAgICAgICAgaW5mb0tleTogdHJ1ZSwKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICAKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy8g6YCA5Ye65Ye95pWwCiAgICAgICAgY2xlYXIoKXsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpZCcpOwogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAvLyB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRMaXN0KCl7CiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXQoJy9hZG1pbi9zaG9wTGlzdCcpOwogICAgICAgICAgICBjb25zb2xlLmxvZygn6I635Y+W55qEZGF0YT09PT4nLGRhdGEpOwogICAgICAgICAgICB0aGlzLnByb0xpc3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKQogICAgICAgICAgICAvLyB0aGlzLnByb0xpc3QgPSBPYmplY3QuYXNzaWduKGRhdGEpCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVDbGljayhyb3csIGluZGV4KXsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMucm93PT0+Jyxyb3cpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndGhpcyByb3cuaW5kZXg9PT4nLGluZGV4KTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wcm9MaXN0KQogICAgICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7CiAgICAgICAgICAgIC8vIHRoaXMuaXRlbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocm93KSkKICAgICAgICAgICAgdGhpcy5pdGVtLm5hbWUgPSByb3cubmFtZQogICAgICAgICAgICB0aGlzLml0ZW0uX2lkID0gcm93Ll9pZAogICAgICAgICAgICB0aGlzLml0ZW0ucHJpY2UgPSByb3cucHJpY2UKICAgICAgICAgICAgdGhpcy5pdGVtLmltYWdlID0gcm93LmltYWdlCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfotYvlgLzlkI7nmoRpdGVtPT0+Jyx0aGlzLml0ZW0pIAogICAgICAgIH0sCiAgICAgICAgY2hhbmdlSXRlbSgpewogICAgICAgICAgICAKICAgICAgICAgICAgdGhpcy5wcm9MaXN0W3RoaXMuaW5kZXhdID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLml0ZW0pKQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn5pu05pS55ZCO55qEaXRlbT09PicsdGhpcy5pdGVtKSAKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+abtOaUueWQjueahHByb0xpc3Q9PT4nLHRoaXMucHJvTGlzdCkKICAgICAgICAgICAgdGhpcy5pbmZvS2V5ID0gIXRoaXMuaW5mb0tleTsKICAgICAgICAgICAgcHV0KCcvYWRtaW4vc2hvcEl0ZW0nLCB7CiAgICAgICAgICAgICAgICBkYXRhOiB0aGlzLml0ZW0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGFkZEl0ZW0oKSB7CiAgICAgICAgICAgIGF3YWl0IHBvc3QoJy9hZG1pbi9zaG9wSXRlbScsIHRoaXMubmV3SXRlbSk7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0TGlzdCgpOwogICAgICAgICAgICB0aGlzLmluZm9LZXkgPSAhdGhpcy5pbmZvS2V5OwogICAgICAgICAgICAKICAgICAgICB9LAogICAgICAgIGFzeW5jIGRlbEl0ZW0ocm93KXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2lkLS0tPicscm93Ll9pZCkKICAgICAgICAgICAgYXdhaXQgZGVsKCcvYWRtaW4vc2hvcEl0ZW0nLCB7aWQ6IHJvdy5faWR9KQogICAgICAgICAgICBhd2FpdCB0aGlzLmdldExpc3QoKTsKICAgICAgICAgICAgdGhpcy5pbmZvS2V5ID0gIXRoaXMuaW5mb0tleTsKICAgICAgICB9LAoKICAgIH0sCn0K"},{"version":3,"sources":["management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"management.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"box\">\n        <div class=\"left\"></div>\n        <div class=\"right\">\n            <div class=\"top\">\n                <h3 class=\"top-tit\">商品管理</h3>\n                <el-button type=\"primary\" plain class=\"topbtn\" @click=\"clear()\">退出</el-button>\n            </div>\n            <div class=\"proList\">\n                <el-button type=\"primary\" icon=\"el-icon-edit\" class=\"addBtn\" @click=\"newItemVisible=true\">增加</el-button>\n                <div class=\"list\">\n                    <el-table :data=\"proList\" border style=\"width: 100%\" :key=\"infoKey\">\n                        <el-table-column prop=\"_id\" label=\"ID\" width=\"200\"></el-table-column>\n                        <el-table-column prop=\"name\" label=\"商品名称\" width=\"400\"></el-table-column>\n                        <el-table-column prop=\"img\" label=\"商品图片\" width=\"200\">\n                            <template slot-scope=\"scope\">\n                                <img :src=\"scope.row.image\" alt=\"\" style=\"width: 180px; height; 120px\">\n                            </template>\n                        </el-table-column>\n                        <el-table-column fixed=\"right\" label=\"操作\" width=\"250\">\n                            <template slot-scope=\"scope\">\n                                <el-button  @click=\"handleClick(scope.row, scope.$index), dialogFormVisible = true\" icon=\"el-icon-edit\">编辑</el-button>\n                                <el-popconfirm\n                                confirm-button-text='删除'\n                                @confirm=\"delItem(scope.row)\"\n                                cancel-button-text='暂时不用'\n                                icon=\"el-icon-info\"\n                                icon-color=\"red\"\n                                title=\"这件商品确定删除吗？\">\n                                <el-button type=\"danger\" icon=\"el-icon-delete\" slot=\"reference\" >删除</el-button>\n                                </el-popconfirm>\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </div>\n            </div>\n        </div>\n        <!-- 增加商品弹框 -->\n        <el-dialog title=\"新增商品\" :visible.sync=\"newItemVisible\">\n            <el-form :model=\"newItem\">\n                <el-form-item label=\"商品名称\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"newItem.name\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"商品价格\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"newItem.price\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"商品图片地址\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"newItem.image\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"newItemVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"addItem(), newItemVisible = false\">确 定</el-button>\n            </div>\n        </el-dialog>\n        <!-- 编辑弹框 -->\n        <el-dialog title=\"编辑商品\" :visible.sync=\"dialogFormVisible\">\n            <el-form :model=\"item\">\n                <el-form-item label=\"商品名称\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"item.name\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"商品价格\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"item.price\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"商品图片\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"item.image\" autocomplete=\"off\"></el-input>\n                    <!-- https://by-image.oss-cn-shanghai.aliyuncs.com/yfront/static/home/new/pic_dating1_sy.png -->\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"changeItem(), dialogFormVisible = false\">确 定</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n\nimport { get, put, post, del} from '../utils/fetch.js'\nexport default {\n    name: 'management',\n    data() {\n        return {\n            proList: [\n                {\n                _id: '',\n                name: '',\n                price: '',\n                image: ''\n                },\n            ],\n            newItem: {\n                name: '',\n                price: '',\n                image: ''\n            },\n            item: {\n                _id: '',\n                name: '',\n                price: '',\n                image: ''\n            },\n            dialogFormVisible: false,\n            newItemVisible: false,\n            formLabelWidth: '120px',\n            index: '',\n            infoKey: true,\n        }\n    },\n    created() {\n        this.getList();\n        \n    },\n    methods: {\n        // 退出函数\n        clear(){\n            window.localStorage.removeItem('id');\n            location.reload();\n        // this.$router.go(0);\n        },\n        async getList(){\n            const data = await get('/admin/shopList');\n            console.log('获取的data===>',data);\n            this.proList = JSON.parse(JSON.stringify(data))\n            // this.proList = Object.assign(data)\n        },\n        handleClick(row, index){\n            // console.log('this.row==>',row);\n            // console.log('this row.index==>',index);\n            // console.log(this.proList)\n            this.index = index;\n            // this.item = JSON.parse(JSON.stringify(row))\n            this.item.name = row.name\n            this.item._id = row._id\n            this.item.price = row.price\n            this.item.image = row.image\n            console.log('赋值后的item==>',this.item) \n        },\n        changeItem(){\n            \n            this.proList[this.index] = JSON.parse(JSON.stringify(this.item))\n            // console.log('更改后的item==>',this.item) \n            // console.log('更改后的proList==>',this.proList)\n            this.infoKey = !this.infoKey;\n            put('/admin/shopItem', {\n                data: this.item\n            })\n        },\n        async addItem() {\n            await post('/admin/shopItem', this.newItem);\n            await this.getList();\n            this.infoKey = !this.infoKey;\n            \n        },\n        async delItem(row){\n            console.log('id--->',row._id)\n            await del('/admin/shopItem', {id: row._id})\n            await this.getList();\n            this.infoKey = !this.infoKey;\n        },\n\n    },\n}\n</script>\n\n\n<style lang=\"scss\" scoped>\n    \n    .box{\n        height: auto;\n        position: relative;\n        \n        .left{\n            width: 50px;\n            height: 900px;\n            left: 0;\n            position: absolute;\n            background-color: black;\n            z-index: 1;\n            margin: 0; \n        }\n        .right{\n            height: auto;\n            position: relative;\n            right: 0;\n\n            .top{\n                width: 100%;\n                height: 60px;\n                position: absolute;\n                top: 0;\n                box-shadow: 0 0 5px 2px rgb(192, 191, 191);\n                .top-tit{\n                    line-height: 60px;\n                    margin: 0 0 0 70px;\n                }\n                .topbtn{\n                    position: absolute;\n                    right: 70px;\n                    top: 10px;\n                }\n            }\n            .proList{\n                width: 100%;\n                height: 600px;\n                top: 60px;\n                position: absolute;\n                \n                .addBtn{\n                    top: 20px;\n                    left: 70px;\n                    position: absolute;\n                }\n                .list{\n                    top: 80px;\n                    left: 70px;\n                    position: absolute;\n                }\n            }\n        }\n    }\n</style>"]}]}