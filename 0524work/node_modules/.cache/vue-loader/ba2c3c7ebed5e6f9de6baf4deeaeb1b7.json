{"remainingRequest":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edz/Documents/chen/webday9work/0524work/src/views/management.vue?vue&type=style&index=0&id=66c5045d&lang=scss&scoped=true&","dependencies":[{"path":"/Users/edz/Documents/chen/webday9work/0524work/src/views/management.vue","mtime":1622170386517},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/css-loader/dist/cjs.js","mtime":1620633453452},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1620782346830},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/postcss-loader/src/index.js","mtime":1620633453970},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/sass-loader/dist/cjs.js","mtime":1620954567806},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/cache-loader/dist/cjs.js","mtime":1620633447712},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/vue-loader/lib/index.js","mtime":1620782346830}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5ib3h7CiAgICBoZWlnaHQ6IGF1dG87CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAKICAgIC5sZWZ0ewogICAgICAgIHdpZHRoOiA1MHB4OwogICAgICAgIGhlaWdodDogOTAwcHg7CiAgICAgICAgbGVmdDogMDsKICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7CiAgICAgICAgei1pbmRleDogMTsKICAgICAgICBtYXJnaW46IDA7IAogICAgfQogICAgLnJpZ2h0ewogICAgICAgIGhlaWdodDogYXV0bzsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgcmlnaHQ6IDA7CgogICAgICAgIC50b3B7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDYwcHg7CiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgdG9wOiAwOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNXB4IDJweCByZ2IoMTkyLCAxOTEsIDE5MSk7CiAgICAgICAgICAgIC50b3AtdGl0ewogICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDYwcHg7CiAgICAgICAgICAgICAgICBtYXJnaW46IDAgMCAwIDcwcHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLnRvcGJ0bnsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgICAgIHJpZ2h0OiA3MHB4OwogICAgICAgICAgICAgICAgdG9wOiAxMHB4OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC5wcm9MaXN0ewogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiA2MDBweDsKICAgICAgICAgICAgdG9wOiA2MHB4OwogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIAogICAgICAgICAgICAuYWRkQnRuewogICAgICAgICAgICAgICAgdG9wOiAyMHB4OwogICAgICAgICAgICAgICAgbGVmdDogNzBweDsKICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICAubGlzdHsKICAgICAgICAgICAgICAgIHRvcDogODBweDsKICAgICAgICAgICAgICAgIGxlZnQ6IDcwcHg7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["management.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"management.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"box\">\n        <div class=\"left\"></div>\n        <div class=\"right\">\n            <div class=\"top\">\n                <h3 class=\"top-tit\">商品管理</h3>\n                <el-button type=\"primary\" plain class=\"topbtn\" @click=\"clear()\">退出</el-button>\n            </div>\n            <div class=\"proList\">\n                <el-button type=\"primary\" icon=\"el-icon-edit\" class=\"addBtn\" @click=\"newItemVisible=true\">增加</el-button>\n                <div class=\"list\">\n                    <el-table :data=\"proList\" border style=\"width: 100%\" :key=\"infoKey\">\n                        <el-table-column prop=\"_id\" label=\"ID\" width=\"200\"></el-table-column>\n                        <el-table-column prop=\"name\" label=\"商品名称\" width=\"400\"></el-table-column>\n                        <el-table-column prop=\"img\" label=\"商品图片\" width=\"200\">\n                            <template slot-scope=\"scope\">\n                                <img :src=\"scope.row.image\" alt=\"\" style=\"width: 180px; height; 120px\">\n                            </template>\n                        </el-table-column>\n                        <el-table-column fixed=\"right\" label=\"操作\" width=\"250\">\n                            <template slot-scope=\"scope\">\n                                <el-button  @click=\"handleClick(scope.row, scope.$index), dialogFormVisible = true\" icon=\"el-icon-edit\">编辑</el-button>\n                                <el-popconfirm\n                                confirm-button-text='删除'\n                                @confirm=\"delItem(scope.row)\"\n                                cancel-button-text='暂时不用'\n                                icon=\"el-icon-info\"\n                                icon-color=\"red\"\n                                title=\"这件商品确定删除吗？\">\n                                <el-button type=\"danger\" icon=\"el-icon-delete\" slot=\"reference\" >删除</el-button>\n                                </el-popconfirm>\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </div>\n            </div>\n        </div>\n        <!-- 增加商品弹框 -->\n        <el-dialog title=\"新增商品\" :visible.sync=\"newItemVisible\">\n            <el-form :model=\"newItem\">\n                <el-form-item label=\"商品名称\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"newItem.name\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"商品价格\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"newItem.price\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"商品图片地址\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"newItem.image\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"newItemVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"addItem(), newItemVisible = false\">确 定</el-button>\n            </div>\n        </el-dialog>\n        <!-- 编辑弹框 -->\n        <el-dialog title=\"编辑商品\" :visible.sync=\"dialogFormVisible\">\n            <el-form :model=\"item\">\n                <el-form-item label=\"商品名称\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"item.name\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"商品价格\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"item.price\" autocomplete=\"off\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"商品图片\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"item.image\" autocomplete=\"off\"></el-input>\n                    <!-- https://by-image.oss-cn-shanghai.aliyuncs.com/yfront/static/home/new/pic_dating1_sy.png -->\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"changeItem(), dialogFormVisible = false\">确 定</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n\nimport { get, put, post, del} from '../utils/fetch.js'\nexport default {\n    name: 'management',\n    data() {\n        return {\n            proList: [\n                {\n                _id: '',\n                name: '',\n                price: '',\n                image: ''\n                },\n            ],\n            newItem: {\n                name: '',\n                price: '',\n                image: ''\n            },\n            item: {\n                _id: '',\n                name: '',\n                price: '',\n                image: ''\n            },\n            dialogFormVisible: false,\n            newItemVisible: false,\n            formLabelWidth: '120px',\n            index: '',\n            infoKey: true,\n        }\n    },\n    created() {\n        this.getList();\n        \n    },\n    methods: {\n        // 退出函数\n        clear(){\n            window.localStorage.removeItem('id');\n            location.reload();\n        // this.$router.go(0);\n        },\n        async getList(){\n            const data = await get('/admin/shopList');\n            console.log('获取的data===>',data);\n            this.proList = JSON.parse(JSON.stringify(data))\n            // this.proList = Object.assign(data)\n        },\n        handleClick(row, index){\n            // console.log('this.row==>',row);\n            // console.log('this row.index==>',index);\n            // console.log(this.proList)\n            this.index = index;\n            // this.item = JSON.parse(JSON.stringify(row))\n            this.item.name = row.name\n            this.item._id = row._id\n            this.item.price = row.price\n            this.item.image = row.image\n            console.log('赋值后的item==>',this.item) \n        },\n        changeItem(){\n            \n            this.proList[this.index] = JSON.parse(JSON.stringify(this.item))\n            console.log('更改后的item==>',this.item) \n            console.log('更改后的proList==>',this.proList)\n            this.infoKey = !this.infoKey;\n            put('/admin/shopItem', {\n                data: this.item\n            })\n        },\n        async addItem() {\n            await post('/admin/shopItem', this.newItem);\n            await this.getList();\n            this.infoKey = !this.infoKey;\n            \n        },\n        async delItem(row){\n            console.log('id--->',row._id)\n            await del('/admin/shopItem', {id: row._id})\n            await this.getList();\n            this.infoKey = !this.infoKey;\n        },\n\n    },\n}\n</script>\n\n\n<style lang=\"scss\" scoped>\n    \n    .box{\n        height: auto;\n        position: relative;\n        \n        .left{\n            width: 50px;\n            height: 900px;\n            left: 0;\n            position: absolute;\n            background-color: black;\n            z-index: 1;\n            margin: 0; \n        }\n        .right{\n            height: auto;\n            position: relative;\n            right: 0;\n\n            .top{\n                width: 100%;\n                height: 60px;\n                position: absolute;\n                top: 0;\n                box-shadow: 0 0 5px 2px rgb(192, 191, 191);\n                .top-tit{\n                    line-height: 60px;\n                    margin: 0 0 0 70px;\n                }\n                .topbtn{\n                    position: absolute;\n                    right: 70px;\n                    top: 10px;\n                }\n            }\n            .proList{\n                width: 100%;\n                height: 600px;\n                top: 60px;\n                position: absolute;\n                \n                .addBtn{\n                    top: 20px;\n                    left: 70px;\n                    position: absolute;\n                }\n                .list{\n                    top: 80px;\n                    left: 70px;\n                    position: absolute;\n                }\n            }\n        }\n    }\n</style>"]}]}