{"remainingRequest":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edz/Documents/chen/webday9work/0524work/src/views/mall.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/edz/Documents/chen/webday9work/0524work/src/views/mall.vue","mtime":1622181724609},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/cache-loader/dist/cjs.js","mtime":1620633447712},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/babel-loader/lib/index.js","mtime":1620633447741},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/cache-loader/dist/cjs.js","mtime":1620633447712},{"path":"/Users/edz/Documents/chen/webday9work/0524work/node_modules/vue-loader/lib/index.js","mtime":1620782346830}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldCwgcHV0IH0gZnJvbSAnLi4vdXRpbHMvZmV0Y2guanMnCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdtYWxsJywKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgamlmZW46JycsCiAgICAgICAgICAgIHByb0xpc3Q6IFtdLAogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCl7CiAgICAgICAgdGhpcy5nZXRQcm9MaXN0KCkKICAgICAgICB0aGlzLmdldEppZmVuKCkKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgLy8g6I635Y+W56ev5YiG5L2Z6aKdCiAgICAgICAgZ2V0SmlmZW4oKXsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ppZmVuJykpID09PSAnJ3x8IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ppZmVuJykpID09bnVsbCl7CiAgICAgICAgICAgICAgICB0aGlzLmppZmVuID0gNTAwCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnamlmZW4nLCBKU09OLnN0cmluZ2lmeSh0aGlzLmppZmVuKSk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhpcy5qaWZlbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ppZmVuJykpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIC8vIOWFkeaNouWVhuWTgQogICAgICAgIGV4Y2hhbmdlKGluZGV4KXsKICAgICAgICAgICAgbGV0IGlkID0gdGhpcy5wcm9MaXN0W2luZGV4XS5faWQKICAgICAgICAgICAgbGV0IHByaWNlID0gdGhpcy5wcm9MaXN0W2luZGV4XS5wcmljZQogICAgICAgICAgICBpZih0aGlzLmppZmVuID49IHByaWNlKXsKICAgICAgICAgICAgICAgIHRoaXMuamlmZW4gPSB0aGlzLmppZmVuIC0gcHJpY2U7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnamlmZW4nLCBKU09OLnN0cmluZ2lmeSh0aGlzLmppZmVuKSk7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2NoYW5nZUppZmVuJywgdGhpcy5qaWZlbikKICAgICAgICAgICAgICAgIHB1dCgnL3Nob3AvZXhjaGFuZ2UnLCB7aWR9KTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBhbGVydCgn56ev5YiG5L2Z6aKd5LiN6Laz77yBJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgLy8g6I635Y+W5ZWG5ZOB5YiX6KGoCiAgICAgICAgYXN5bmMgZ2V0UHJvTGlzdCgpIHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldCgnL3Nob3Avc2hvcExpc3QnKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHRoaXMucHJvTGlzdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgICAgIH0KICAgIH0sCn0K"},{"version":3,"sources":["mall.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"mall.vue","sourceRoot":"src/views","sourcesContent":["\n<template>\n    <div class=\"record-box\">\n        <div class=\"jifen\">\n            积分：{{jifen}}\n        </div>\n        <h3 style=\"margin: 20px 40px;\">商城</h3>\n        <div class=\"pro-list\">\n            <div class=\"pro-item\" v-for=\"(item, index) in proList\" :key=\"index\">\n                <img :src=item.image alt=\"pro\" class=\"pro-img\">\n                <p class=\"pro-name\">{{item.name}}</p>\n                <p class=\"pro-price\"><i class=\"el-icon-coin\"></i>{{item.price}}积分</p>\n                <el-button size=\"mini\" round class=\"pro-btn\" @click=\"exchange(index)\">兑换</el-button>\n            </div>\n            \n        </div>\n    </div>\n</template>\n\n<script>\nimport { get, put } from '../utils/fetch.js'\nexport default {\n    name: 'mall',\n    data() {\n        return {\n            jifen:'',\n            proList: [],\n        }\n    },\n    created(){\n        this.getProList()\n        this.getJifen()\n    },\n    methods: {\n        // 获取积分余额\n        getJifen(){\n            \n            if(JSON.parse(localStorage.getItem('jifen')) === ''|| JSON.parse(localStorage.getItem('jifen')) ==null){\n                this.jifen = 500\n                localStorage.setItem('jifen', JSON.stringify(this.jifen));\n            }else{\n                this.jifen = JSON.parse(localStorage.getItem('jifen'))\n            }\n        },\n        // 兑换商品\n        exchange(index){\n            let id = this.proList[index]._id\n            let price = this.proList[index].price\n            if(this.jifen >= price){\n                this.jifen = this.jifen - price;\n                localStorage.setItem('jifen', JSON.stringify(this.jifen));\n                this.$store.commit('changeJifen', this.jifen)\n                put('/shop/exchange', {id});\n            }else{\n                alert('积分余额不足！')\n            }\n        },\n        // 获取商品列表\n        async getProList() {\n            const data = await get('/shop/shopList');\n            \n            this.proList = JSON.parse(JSON.stringify(data));\n        }\n    },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.record-box{\n    width: auto;\n    height: auto;\n    position: relative;\n    .jifen{\n        width: 900px;\n        height: 200px;\n        margin: 20px 40px;\n        background-image: url(../images/back.png);\n        background-repeat: no-repeat;\n        background-size: 100% 100%;\n        -moz-background-size:100% 100%;\n        color: white;\n        text-align: center;\n        line-height: 200px;\n        font-size: 30px;\n    }\n    .pro-list{\n        width: 900px;\n        height: auto;\n        position: relative;\n        flex-wrap: wrap;\n        margin: 20px 40px;\n        float: left;\n        .pro-item{\n            width: 200px;\n            height: 300px;\n            margin: 0px 20px 10px 0px;\n            display: inline-block;\n            position: relative;\n            box-shadow: 0 0 10px 1px #e3e4e5;\n            border-radius: 10px;\n            .pro-img{\n                width: 200px;\n                height: 220px;\n                position: absolute;\n                border-radius: 10px;\n            };\n            .pro-name{\n                width: 200px;\n                height: 30px;\n                text-overflow: ellipsis;\n                overflow: hidden;\n                white-space: nowrap;\n                margin: 0 5px;\n                top: 230px;\n                position: absolute;\n            }\n            .pro-price{\n                position: absolute;\n                margin-left: 10px;\n                bottom: 0;\n                left: 0;\n                color: lightskyblue;\n            };\n            .pro-btn{\n                position: absolute;\n                margin-right: 10px;\n                bottom: 10px;\n                right: 0;\n            }\n            \n        }\n    }\n}\n</style>"]}]}